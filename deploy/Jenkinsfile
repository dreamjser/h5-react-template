def git_branch = '*/master'
def git_url = 'https://github.com/dreamjser/h5-react-template.git'

pipeline {
  agent any
  tools {
    nodejs "node18"
  }
  stages {
    stage('checkout') {
      steps {
        checkout([$class: 'GitSCM', branches: [[name: "${git_branch}"]], extensions: [], userRemoteConfigs: [[credentialsId: 'git_auth', url: "${git_url}"]]])
        // env.Tag = sh (script: 'git log -1 --pretty=%h', returnStdout: true).trim()

        // echo env.Tag
      }
    }

    stage('build') {
      steps {
        sh """
          /bin/bash ./deploy/build.sh
        """
      }
    }
  }
}
